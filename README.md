# Vue.js 前端应用 #4 高级组件

清理，准备开始 components 项目

## 4.1 定义与使用 vue 组件

SFC: 在 Vue 应用里，一个组件可以是一个单独的文件，这种组件叫 single file component ，单文件组件，简称 SFC。组件就是应用里的一块可以重复使用的界面，你可以定义组件的模板，样式，还有组件可以做的事情

```
<AppButton /> //自关闭的方法，PascalCase 的写法
<app-button /> //kebab-case 的写法
<AppButton></AppButton>//成组的写法，中间可以包装一些东西
<app-button></app-button>
```

## 4.2 组件的样式

可以在组件中直接导入样式文件

```
<style>
@import './button.css';
</style>
```

## 4.3 scoped：限定组件样式的应用范围

```
<style scoped>
...
</style>
```

在这个带有 scoped 属性的标签中包含的样式，只会影响到当前组件内元素的样式。<注意：如果这里使用了`@import`来导入样式表文件，样式表的文件依然会影响到其他组件内的元素>

## 4.4 props：Vue 组件的属性

在定义 Vue 组件的时候，可以让组件支持一些属性，使用这个组件的时候可以设置组件的这些属性。属性可以让组件更灵活，更容易重复使用。比如在这个按钮组件上要显示的文本，就可以是这个组件支持的一个属性，这样使用这个组件的时候就可以设置按钮上要显示的文字了。

组件支持的属性可以放在这个对象的 props 这个属性里面，这里我们就让组件支持了一个`text`属性，因此，在调用这个组件的时候，我们就可以直接使用`text="确定"`，这样的方式，让这个按钮的文字发生了变化

## 4.5 监听子组件的事件

在一个组件里使用了另一个组件，它们之间就有了一个父子关系，一个可以看成是父组件，另一个可以看成是子组件。父组件可以通过 props ，也就是组件的属性，把数据传递给子组件。在子组件里面发生的事情可以通过自定义的事件告诉给它的父组件。

在`AppButton`这个子组件中,在这个按钮上用定义了一个`click`事件，这个点击事件促发一个自定义的事件，这里用`$emit()`自定义一个子组件的事件，`$emit('tap',text)`可以添加参数，第一个参数是自定义事件的名字,这里是`tap`，第二个参数的意思是传递 父组件上 text 的值。另外，在这个子组件中，可以定义`created()`方法，就时在这个元素被创建后，发生的事件，这里也可以使用`this.$emit('init')`，自定义一个名叫`init`的事件。

`App`作为父组件，调用了`AppButton`,因此，在这个组件上，可以使用`@tap="onTapAppButton"`和`@init="onInitAppButton"`的方式，监听这两个事件，当子组件的这两个事件发生时，将会促发`methods:`方法中的，`onTapAppButton`和`onInitAppButton`这两个函数

## 4.6 slot：在 Vue 组件里用插槽分发内容

在 button 组件里可以使用一组 slot 添加内容插槽，这样就可以把按钮文字放在组件的开始与结束之间

## 4.7 动态组件（Dynamic Components）

动态组件就是在一个页面上切换显示不同的组件

例如：在页面上，用户登录的区块用的就时一组动态组件，当用户首次打开页面，用户的区块上显示的就是登陆表单，当用户登录后，同样的区域内显示的就时用户的信息，当游客需要注册时，也客户把登陆表单切换为注册表单。

## 4.8 keep-alive：保持动态组件的活动状态

每次在切换显示动态组件的时候，组件都会重新创建，也就是会丢掉组件的状态。比如在这个用户登录组件的文本框里面，输入点内容。然后切换显示 用户注册 组件，再切换回 用户登录 组件，你会发现，之前在文本框里输入的内容就不见了。

如果你想缓存已经创建过的组件，或者想保留组件的原有的状态，我们可以使用 keep-alive 。 在这个动态组件的周围，可以使用一组 keep-alive 包装一下。保存一下文件。

再回到浏览器测试一下，在这个文本框里输入点内容， 然后切换显示其它的组件，再切换回来，你会发现，之前在这个组件的文本框里输入的内容仍然会在这里。因为现在用了 keep-alive ，它会保留组件的原有状态。
